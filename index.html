<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>OW-CLI</title>
<style>
  body {
    margin: 0;
    height: 100vh;
    background: #000;
    color: #fff;
    font-family: monospace;
    font-size: 16px;
    line-height: 1.4;
    padding: 10px;
    box-sizing: border-box;
    overflow: hidden;
  }
  #terminal {
    height: 100%;
    overflow-y: auto;
  }
  .line {
    white-space: pre-wrap;
    word-break: break-all;
  }
  .prompt { color: #fff; }
  input {
    background: transparent;
    border: none;
    color: inherit;
    font: inherit;
    outline: none;
    width: 100%;
    caret-color: #fff;
  }
  #cursor {
    display: inline-block;
    width: 10px;
    height: 1.2em;
    background: #fff;
    animation: blink 1s step-end infinite;
    vertical-align: middle;
  }
  @keyframes blink { 50% { opacity: 0; } }
  .success { color: #00ff99; }
  .error { color: #ff4444; }
  .note { color: #ffff00; }
  .help-title { color: #00aaff; font-weight: bold; }
</style>
</head>
<body>
<div id="terminal"></div>

<script>
const terminal = document.getElementById('terminal');
const sessionStart = Date.now();
const USER = "shaptz";
const HOST = "OWCLI";
let fakeCurrentPath = "/home/shaptz";
let history = [];
let historyIndex = -1;

const builtins = [
  "help","clear","exit","echo","whoami",
  "pwd","uptime","neofetch","banner",
  "compgen","notpos","raz","math"
];

const notPossible = [
  "ls","cat","touch","rm","mkdir","rmdir",
  "cp","mv","grep","awk","sed","vim","nano",
  "ping","top","htop"
];

const RAZ_LINKS = [
  "https://vb1.shaptz.surge.sh",
  "https://kbhgames.com",
  "https://gn-math.dev"
];

const OWCLI_LOGO = [
"  _____        __",
" / _ \\ \\      / /",
"| | | \\ \\ /\\ / /",
"| |_| |\\ V  V /",
" \\___/ _\\_/\\_/__",
" / ___| |   |_ _|",
"| |   | |    | |",
"| |___| |___ | |",
" \\____|_____|___|"
];

const NF_COLORS = ["#ff5555","#50fa7b","#f1fa8c","#bd93f9","#ff79c6","#8be9fd","#ffb86c","#ffffff"];

function formatUptime(ms){
  const s = Math.floor(ms/1000);
  return `${String(Math.floor(s/3600)).padStart(2,'0')}:${String(Math.floor(s%3600/60)).padStart(2,'0')}:${String(s%60).padStart(2,'0')}`;
}

function print(text,cls=''){
  const line=document.createElement('div');
  line.className='line '+cls;
  line.textContent=text;
  terminal.appendChild(line);
  terminal.scrollTop=terminal.scrollHeight;
}

function clearScreen(){ terminal.innerHTML=''; }

function printLogo(){
  OWCLI_LOGO.forEach(l=>print(l,'success'));
}

function printColors(){
  const line=document.createElement('div');
  NF_COLORS.forEach(c=>{
    const s=document.createElement('span');
    s.textContent='█';
    s.style.color=c;
    line.appendChild(s);
  });
  terminal.appendChild(line);
}

function printInfo(){
  [
    ["OS","OWCLI OS"],
    ["Host",HOST],
    ["Kernel","web-virtual"],
    ["Shell","bash (simulated)"],
    ["User",USER],
    ["Uptime",formatUptime(Date.now()-sessionStart)]
  ].forEach(i=>print(i[0].padEnd(8)+" : "+i[1]));
}

function printNeofetch(mode){
  if(!mode){
    const max = Math.max(...OWCLI_LOGO.map(l=>l.length));
    const info=[
      ["OS","OWCLI OS"],["Host",HOST],["Kernel","web-virtual"],
      ["Shell","bash (simulated)"],["User",USER],
      ["Uptime",formatUptime(Date.now()-sessionStart)]
    ];
    for(let i=0;i<OWCLI_LOGO.length;i++){
      const d=document.createElement('div');
      d.className='line';
      d.innerHTML=`<span style="color:#ff79c6">${OWCLI_LOGO[i].padEnd(max)}</span> <span style="color:#f1fa8c">${info[i]?info[i][0]+": "+info[i][1]:""}</span>`;
      terminal.appendChild(d);
    }
    print("Colors:");
    printColors();
  }
  else if(mode==="--colors") printColors();
  else if(mode==="--info") printInfo();
  else if(mode==="--logo") printLogo();
  else print("Unknown neofetch option","error");
}

function newPrompt(){
  const p=document.createElement('div');
  p.className='line prompt';
  p.textContent=`${USER}@${HOST}:${fakeCurrentPath}$ `;
  const i=document.createElement('input');
  p.appendChild(i);
  terminal.appendChild(p);
  i.focus();

  i.addEventListener('keydown',e=>{
    if(e.key==='Enter'){
      const cmd=i.value.trim();
      history.push(cmd); historyIndex=history.length;
      p.textContent+=cmd;
      i.remove();
      handleCommand(cmd);
    }
    if(e.key==='ArrowUp'){ historyIndex=Math.max(0,historyIndex-1); i.value=history[historyIndex]||''; }
    if(e.key==='ArrowDown'){ historyIndex=Math.min(history.length,historyIndex+1); i.value=history[historyIndex]||''; }
  });
}

function handleCommand(cmd){
  const [c,...a]=cmd.split(/\s+/);

  if(c==="help"){
    print("Available commands:","help-title");
    builtins.forEach(x=>print("  "+x));
  }
  else if(c==="clear"){ clearScreen(); }
  else if(c==="exit"){ print("Cannot exit browser shell ","note"); }
  else if(c==="echo"){ print(a.join(" ")); }
  else if(c==="whoami"){ print(USER); }
  else if(c==="pwd"){ print(fakeCurrentPath); }
  else if(c==="uptime"){ print(formatUptime(Date.now()-sessionStart)); }
  else if(c==="banner"){ printLogo(); }
  else if(c==="neofetch"){ printNeofetch(a[0]); }
  else if(c==="compgen"){ [...builtins,...notPossible].forEach(x=>print(x)); }
  else if(c==="notpos"){ notPossible.forEach(x=>print(x)); }

  /* math */
  else if(c==="math"){
    try{
      const expr=cmd.slice(5).trim().replace(/^"|"$/g,'');
      if(!/^[0-9+\-*/().\s]+$/.test(expr)) throw 1;
      print(String(Function("return "+expr)()));
    }catch{ print("Invalid math expression","error"); }
  }

  /* raz */
  else if(c==="raz"){
    if(a[0]==="--list"){
      RAZ_LINKS.forEach(l=>print(l));
    } else if(a[0]){
      print("Opening "+a[0],"success");
      window.open(a[0],"_blank");
    } else print("Usage: raz <url> | raz --list","error");
  }

  else if(c!==""){ print("Command not recognized","error"); }

  setTimeout(newPrompt,80);
}

print('OW-CLI: “compgen -c” for commands list','note');
newPrompt();
</script>
</body>
</html>
